{% extends 'base.html' %}
{% load static %}
{% block css %}
    <title>IQDent - {{ product.name }}</title>
    <meta name="title" content="IQDent - {{ product.name }}"/>
    <meta name="description" content="Алмазные боры - классификация и употребление"/>
    <meta property="og:title" content="IQDent - {{ product.name }}"/>
    <meta property="og:description" content="Алмазные боры - классификация и употребление"/>
    <meta property="twitter:title" content="IQDent - {{ product.name }}"/>
    <meta property="twitter:description" content="Алмазные боры - классификация и употребление"/>
    <link rel="stylesheet" href="{% static 'plugins/swiper/swiper-bundle.min.css' %}">
{% endblock %}
{% block content %}
    <div class="wrapper">
        <nav id="nav" class="bg-darkBlue py-2.5 w-full fixed top-0 left-0 z-50 ">
            <div class="container flex items-center justify-between">
                <a href="/" class="w-[120px] h-8 block lg:w-[140px] lg:h-10">
                    <img class="w-full h-full block object-contain logo-white" src="{% static 'image/logowhite.png' %}"
                         alt="IQDENT Logo">
                    <img class="w-full h-full block object-contain hidden logo-dark"
                         src="{% static 'image/logodark.png' %}"
                         alt="IQDENT Logo">
                </a>
                <ul class="flex items-center max-md:py-20 max-md:text-xl max-md:text-xl  lg:text-lg max-md:px-6 max-md:w-[300px]  gap-4 max-md:flex-col text-white nav-list font-inter max-md:fixed z-[9999] max-md:bg-darkBlue max-md:top-0 duration-300 max-md:-right-full max-md:h-screen">
                    <li class="relative hover:before:w-1/2 before:w-0 before:h-[3px] before:rounded-s before:duration-200 before:bg-white before:absolute before:-bottom-2 md:before:-bottom-4 before:right-1/2   hover:after:w-1/2 after:w-0 after:h-[3px] after:rounded-e after:duration-200 after:bg-white after:absolute after:-bottom-2 md:after:-bottom-4 after:left-1/2  md:px-3  duration-300">
                        <a href="{% url 'home' %}">Главная</a>
                    </li>
                    <li class="relative hover:before:w-1/2 before:w-0 before:h-[3px] before:rounded-s before:duration-200 before:bg-white before:absolute before:-bottom-2 md:before:-bottom-4 before:right-1/2   hover:after:w-1/2 after:w-0 after:h-[3px] after:rounded-e after:duration-200 after:bg-white after:absolute after:-bottom-2 md:after:-bottom-4 after:left-1/2  md:px-3  duration-300">
                        <a href="{% url 'about' %}">О нас</a>
                    </li>
                    <li class="relative before:w-1/2 before:h-[3px] before:rounded-s before:duration-200 before:bg-white before:absolute before:-bottom-2 md:before:-bottom-4 before:right-1/2   after:w-1/2 after:h-[3px] after:rounded-e after:duration-200 after:bg-white after:absolute after:-bottom-2 md:after:-bottom-4 after:left-1/2  md:px-3  duration-300">
                        <a href="{% url 'products' %}">Каталог</a>
                    </li>
                    <li class="relative hover:before:w-1/2 before:w-0 before:h-[3px] before:rounded-s before:duration-200 before:bg-white before:absolute before:-bottom-2 md:before:-bottom-4 before:right-1/2   hover:after:w-1/2 after:w-0 after:h-[3px] after:rounded-e after:duration-200 after:bg-white after:absolute after:-bottom-2 md:after:-bottom-4 after:left-1/2  md:px-3  duration-300">
                        <a href="{% url 'certificates' %}">Сертификаты</a>
                    </li>
                    <li class=" duration-300 py-1 px-4 border w-fit border-white hover:bg-white hover:text-darkBlue">
                        <a href="tel:+998900001234">Контакты</a>
                    </li>
                    <div class="absolute top-5 right-5 w-6 h-6 z-10 nav-close md:hidden ">
                        <i data-lucide="x" class="w-full h-full"></i>
                    </div>
                </ul>
                <div class="w-full h-screen absolute top-0 left-0 right-0 bg-darkBlue/50 z-[20] hidden nav-bg"></div>
                <div class="w-6 h-6 md:hidden nav-menu">
                    <svg viewBox="0 0 24 24" class="w-full h-full text-white " fill="currentColor"
                         xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                              d="M4 5C3.44772 5 3 5.44772 3 6C3 6.55228 3.44772 7 4 7H20C20.5523 7 21 6.55228 21 6C21 5.44772 20.5523 5 20 5H4ZM7 12C7 11.4477 7.44772 11 8 11H20C20.5523 11 21 11.4477 21 12C21 12.5523 20.5523 13 20 13H8C7.44772 13 7 12.5523 7 12ZM13 18C13 17.4477 13.4477 17 14 17H20C20.5523 17 21 17.4477 21 18C21 18.5523 20.5523 19 20 19H14C13.4477 19 13 18.5523 13 18Z"/>
                    </svg>
                </div>
            </div>
        </nav>
        <section class="mt-14  pt-8 md:pt-[50px]  pb-10 md:pb-20">
            <div class="container">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-5 xl:gap-14">
                    <div class="w-full aspect-[7/6]  lg:col-span-2 md:h-full" data-aos="fade-right">
                        <img src="{{ product.image.url }}"
                             class="w-full border border-[#232D371A] h-full object-cover" alt="Bor Image">
                        {% if product.stock %}
                            <div class="absolute top-0 right-0 py-1 px-3 bg-green-600 rounded-bl-lg text-sm font-medium text-white">
                                В наличии
                            </div>
                        {% else %}
                            <div class="absolute top-0 right-0 py-1 px-3 bg-red-600 rounded-bl-lg text-sm font-medium text-white">
                                Нет в наличии
                            </div>
                        {% endif %}
                    </div>
                    <div class=" font-mulish flex flex-col gap-3 lg:col-span-3 pt-6">
                        <h2 class="section-title after:!hidden" data-aos="fade-up">{{ product.name }}</h2>
                        <p class="text-lg md:text-xl lg:text-2xl " data-aos="fade-up">Номер формы
                            (ИСО): {{ product.iso_number }}</p>
                        <div class="space-y-1">
                            {% for i in product.infos.all %}
                                <div class='text-sm lg:text-base   flex justify-between items-end  w-full '
                                     data-aos="fade-up">
                                    <p class='text-darkBlue whitespace-nowrap '>{{ i.key }}</p>
                                    <div class='h-full w-full border-b flex-1 border-dashed'></div>
                                    <p class='text-black max-w-1/2 text-right text-wrap'>{{ i.value }}</p>
                                </div>
                            {% endfor %}
                        </div>
                        <div class="py-5 border-t w-full mt-5">
                            <div class='text-sm lg:text-lg   flex justify-between items-end  w-full '
                                 data-aos="fade-up">
                                <p class='text-darkBlue whitespace-nowrap font-semibold '>Стоимость за (1 шт.)</p>
                                <div class='h-full w-full border-b flex-1 border-dashed'></div>
                                <p class='text-black max-w-1/2 text-right text-wrap'>  {{ product.sum_one_product }}</p>
                            </div>
                            <div class='text-sm lg:text-lg   flex justify-between items-end  w-full '
                                 data-aos="fade-up">
                                <p class='text-darkBlue whitespace-nowrap font-semibold'>Стоимость за (5 шт пачка.)</p>
                                <div class='h-full w-full border-b flex-1 border-dashed'></div>
                                <p class='text-black max-w-1/2 text-right text-wrap'>  {{ product.sum_five_product }}</p>
                            </div>
                        </div>


                        <div class=" text-sm lg:text-base  space-y-5" data-aos="fade-up">
                            {% for i in product.thanks.all %}
                                <p class="">{{ i.text }}</p>
                            {% endfor %}
                        </div>
                        <button data-aos="fade-up"
                                class="bg-darkBlue product-btn text-white py-2 block w-fit px-2.5 font-mulish text-sm lg:text-base  mt-3">
                            Оставить заявку
                        </button>
                    </div>
                </div>
                <div class="w-full py-5 md:py-9 font-mulish pb-32">
                    <h3 class="font-bold text-lg md:text-xl lg:text-2xl mb-3 lg:mb-8" data-aos="fade-up">Линейка
                        размеров:</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-5 lg:gap-12 ">
                        <div class="w-full aspect-[16/7] border lg:col-span-2 border-[#232D371A]" data-aos="fade-up">
                            <img src="{{ product.size_image.url }}" class="w-full h-full object-contain"
                                 alt="size_image">
                        </div>
                        <div class="w-full flex flex-col xl:px-10 lg:col-span-3" data-aos="fade-up">
                            <div class="w-fit">
                                <h3 class="font-mulish font-bold text-3xl md:text-4xl w-fit text-darkBlue">
                                    314.697.524</h3>
                                <div class="grid grid-cols-3 w-[180px] md:w-[220px] lg:w-[250px]">
                                    <div class="relative">
                                        <div class="absolute left-[40%] top-0 w-fit p-2 text-darkBlue text-sm lg:text-lg shrink-0 ">
                                            <p class="shrink-0 w-fit text-nowrap">Вид наконечника</p>
                                            <img src="{% static 'image/inner-vector.svg' %}"
                                                 class="w-full h-full absolute top-0 left-0 right-0 bottom-0 "
                                                 alt="Vector Icon">
                                        </div>
                                    </div>
                                    <div class="relative">
                                        <div class="absolute left-[40%] top-9 w-fit p-2 text-darkBlue text-sm lg:text-lg shrink-0 ">
                                            <p class="shrink-0 w-fit text-nowrap">Номер формы</p>
                                            <img src="{% static 'image/inner-vector.svg' %}"
                                                 class="w-full h-full absolute top-0 left-0 right-0 bottom-0 "
                                                 alt="Vector Icon">
                                        </div>
                                    </div>
                                    <div class="relative">
                                        <div class="absolute left-[40%] top-20 w-fit p-2 text-darkBlue text-sm lg:text-lg shrink-0 ">
                                            <p class="shrink-0 w-fit text-nowrap">Вид алмазного покрытия</p>
                                            <img src="{% static 'image/inner-vector.svg' %}"
                                                 class="w-full h-full absolute top-0 left-0 right-0 bottom-0 "
                                                 alt="Vector Icon">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% if similar_products %}
                    <div class="py-10 ">
                        <h2 class="font-mulish font-bold md:text-lg lg:text-xl xl:text-2xl pb-4 md:pb-8">Похожие
                            товары</h2>
                        <div class="swiper productsSwiper">
                            <div class="swiper-wrapper">
                                {% for i in similar_products %}
                                    <div class="swiper-slide">
                                        <a href="{% url 'product' i.id %}"
                                           class="bg-[#FEFEFE] block border border-[#232D371A] flex flex-col items-center gap-y-2 md:gap-y-4 xl:gap-y-6 pt-6 pb-3 xl:pt-10 xl:pb-4 duration-300 hover:shadow-md"
                                           data-aos="fade-up">
                                            <img class="md:aspect-[5/14] aspect-[5/11] md:w-[100px] w-[70px]"
                                                 src="{{ i.image.url }}" alt="Product Image ">
                                            <p class="text-sm max-md:max-w-[140px] text-center md:text-base ">{{ i.name }},
                                                {{ i.iso_number }}</p>
                                        </a>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>

                    </div>
                {% endif %}
            </div>
        </section>
        <div class="w-full h-full fixed top-0 left-0 bg-darkBlue/40 modal-form z-20 hidden">
            <div class="container flex flex-col items-center h-full justify-center">
                <div class="border border-white shadow-[unset_0_0_4px_0_#232D37] duration-300 scale-[0.1] -translate-y-20 p-2 modal-element">
                    <div class="p-4 lg:p-7 bg-darkBlue !w-full !max-w-[450px]   ">
                        <form method="post" action="{% url 'product' product.id %}"
                              class="flex flex-col gap-4 w-full items-center text-center isSucces">
                            {% csrf_token %}
                            <h2 class="text-lg md:text-xl text-white font-bold lg:text-2xl ">Заказать
                                ({{ product.name }}, {{ product.iso_number }})</h2>
                            <input type="text" placeholder="Имя" name="name"
                                   class="bg-white text-darkBlue rounded-lg w-full !outline-0" data-aos="fade-up">
                            <input type="text" placeholder="Телефон" name="phone"
                                   class="bg-white text-darkBlue rounded-lg w-full !outline-0" data-aos="fade-up">
                            <button class=" duration-300 py-1 px-4 border w-fit border-white hover:bg-white hover:text-darkBlue text-white">
                                Заказать
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div id="successModal" class="w-full h-full fixed top-0 left-0 bg-darkBlue/40 succes-form z-20 hidden">
            <div class="container flex flex-col items-center h-full justify-center">
                <div class="p-4 lg:p-7 bg-darkBlue !w-full gap-2 text-white !max-w-[450px] succes-element flex flex-col items-center text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none"
                         stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="lucide lucide-circle-check-big">
                        <path d="M21.801 10A10 10 0 1 1 17 3.335"/>
                        <path d="m9 11 3 3L22 4"/>
                    </svg>
                    <h2 class="text-xl text-center font-medium  md:text-2xl lg:text-3xl">Ваш запрос принят</h2>
                </div>
            </div>
        </div>
        <div id="errorModal" class="w-full h-full fixed top-0 left-0 bg-darkBlue/40 succes-form z-20 hidden">
            <div class="container flex flex-col items-center h-full justify-center">
                <div class="p-4 lg:p-7 bg-white !w-full gap-2 text-[#f44336] !max-w-[450px] succes-element flex flex-col items-center text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none"
                         stroke="#f44336" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="lucide lucide-ban">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="m4.9 4.9 14.2 14.2"/>
                    </svg>
                    <h2 class="text-xl text-center font-medium  md:text-2xl lg:text-3xl">Ваш запрос не принят</h2>
                </div>
            </div>
        </div>
        {% include 'footer.html' %}
    </div>
{% endblock %}
{% block js %}
    <script src="{% static 'plugins/swiper/swiper-bundle.min.js' %}"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            {% for mes in messages %}
                {% if mes.tags == 'success' %}
                    const successModal = document.querySelector('#successModal')
                    successModal.classList.remove('hidden')
                    setTimeout(function () {
                        successModal.classList.add('hidden')
                    }, 1000);
                {% elif mes.tags == 'error'%}
                    const errorModal = document.querySelector('#errorModal')
                    errorModal.classList.remove('hidden')
                    setTimeout(function () {
                        errorModal.classList.add('hidden')
                    }, 1000);
                {% endif %}
            {% endfor %}
        });
    </script>
    <script>
        var swiper = new Swiper(".productsSwiper", {
            slidesPerView: 2,
            autoplay: {
                delay: 6000,
                disableOnInteraction: false,
            },
            spaceBetween: 20,
            breakpoints: {
                640: {
                    slidesPerView: 3,
                    spaceBetween: 20,
                },
                1024: {
                    slidesPerView: 3.5,
                    spaceBetween: 30,
                },
                1280: {
                    slidesPerView: 4,
                    spaceBetween: 30,
                },
                1520: {
                    slidesPerView: 4.5,
                    spaceBetween: 30,
                },
            }
        });
    </script>
    <script>
        AOS.init();
    </script>
    <script>
        lucide.createIcons();
    </script>
{% endblock %}
